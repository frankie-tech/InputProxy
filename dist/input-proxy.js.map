{"version":3,"file":"input-proxy.js","sources":["../index.ts"],"sourcesContent":["// TODO: get deeply nested JSON values\n/*\nconst type = (obj: unknown) => Object.prototype.toString.call(obj);\n\nconst deepCheck = (object: object, keys: string[]) => {\n\tlet currObject = object;\n\tfor (let key of keys) {\n\t\tif (type(currObject) !== '[object Object]') break;\n\t\tif (key in currObject === false) break;\n\n\t\tcurrObject = currObject[key];\n\t}\n\n\treturn {\n\t\tresult: currObject,\n\t\tkeys,\n\t}\n}*/\nconst InputProxy = (el: HTMLInputElement) => {\n\tif (el.value === '') el.value = '{}'\n\n\tlet p = new Proxy(el, {\n\t\tset(el: HTMLInputElement, key: string, value: unknown) {\n\n\t\t\tconst json: object = JSON.parse(el.value);\n\n\t\t\tjson[key] = value;\n\t\t\tel.value = JSON.stringify(json);\n\n\t\t\treturn true;\n\t\t},\n\t\tget(el: HTMLInputElement, key: string) {\n\t\t\tif (key === '__value') return el.value;\n\n\t\t\tconst json = JSON.parse(el.value);\n\n\t\t\tif (key in json === false) {\n\t\t\t\tconsole.warn('Missing key in value, returning null.');\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn json[key];\n\t\t},\n\t\tdeleteProperty(el, key) {\n\t\t\tconst json = JSON.parse(el.value);\n\n\t\t\tif (key in json === false) {\n\t\t\t\tconsole.warn('Missing key, returning false.');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Reflect.deleteProperty(json, key);\n\t\t}\n\t});\n\n\treturn p;\n}\n\nexport default InputProxy;\n"],"names":["InputProxy","el","value","Proxy","set","key","json","JSON","parse","stringify","get","console","warn","deleteProperty","Reflect"],"mappings":"AAkBMA,MAAAA,EAAcC,IACF,KAAbA,EAAGC,QAAcD,EAAGC,MAAQ,MAExB,IAAIC,MAAMF,EAAI,CACrBG,IAAIH,EAAsBI,EAAaH,GAEtC,MAAMI,EAAeC,KAAKC,MAAMP,EAAGC,OAKnC,OAHAI,EAAKD,GAAOH,EACZD,EAAGC,MAAQK,KAAKE,UAAUH,OAI3BI,IAAIT,EAAsBI,GACzB,GAAY,YAARA,EAAmB,OAAOJ,EAAGC,MAEjC,MAAMI,EAAOC,KAAKC,MAAMP,EAAGC,OAE3B,OAAIG,KAAOC,GAAS,GACnBK,QAAQC,KAAK,+CAIPN,EAAKD,IAEbQ,eAAeZ,EAAII,GAClB,MAAMC,EAAOC,KAAKC,MAAMP,EAAGC,OAE3B,OAAIG,KAAOC,GAAS,GACnBK,QAAQC,KAAK,qCAIPE,QAAQD,eAAeP,EAAMD"}